{
  "sourceUrl": "https://rsshub.rssforever.com/google/developers/en",
  "title": "Google Developers Blog",
  "description": "Google Developers Blog - Powered by RSSHub",
  "link": "https://developers.googleblog.com",
  "items": [
    {
      "title": "在 Android WebView 中添加对 Google Pay 的支持 (原标题: Adding support for Google Pay within Android WebView)",
      "link": "https://developers.googleblog.com/en/adding-support-for-google-pay-within-android-webview/",
      "pubDate": "Tue, 27 May 2025 16:00:00 GMT",
      "isoDate": "2025-05-27T16:00:00.000Z",
      "creator": "Google",
      "summary": "文章介绍了如何在 Android WebView 中支持 Google Pay，允许 Android 应用在嵌入 web 结账流程时使用 Google Pay。\n\n**主要内容：**\n\n*   Google Pay 现在在 Android WebView 中受支持，从 WebView 版本 137 开始可用。\n*   该解决方案使用 Payment Request API，允许在 WebView 中嵌入的网站启动 Android 支付应用。\n*   从 Google Play Services 25.18.30 开始，Google Pay 将触发原生支付界面，这意味着用户设备令牌可用于在 WebView 中触发的支付。\n\n**所需更改：**\n\n1.  添加或更新构建依赖项：`androidx.webkit:webkit:1.14.0-rc01`\n2.  将以下 queries 标签添加到 AndroidManifest.xml：\n    ```xml\n    <queries>\n        <intent>\n            <action android:name=\"org.chromium.intent.action.PAY\"/>\n        </intent>\n        <intent>\n            <action android:name=\"org.chromium.intent.action.IS_READY_TO_PAY\"/>\n        </intent>\n        <intent>\n            <action android:name=\"org.chromium.intent.action.UPDATE_PAYMENT_DETAILS\"/>\n        </intent>\n    </queries>\n    ```\n3.  为 App 中使用的 WebView 启用 Payment Request API。\n\n```kotlin\nimport android.webkit.WebSettings;\nimport android.webkit.WebView;\nimport androidx.webkit.WebSettingsCompat;\nimport androidx.webkit.WebViewFeature;\n\nAndroidView(\n    factory = {\n        WebView(it).apply {\n            // Update WebView settings to allow JavaScript and payment request\n            settings.javaScriptEnabled = true\n            if (WebViewFeature.isFeatureSupported(\n                    WebViewFeature.PAYMENT_REQUEST\n            )) {\n                WebSettingsCompat.setPaymentRequestEnabled(settings, true)\n            }\n        }\n    },\n    update = { it.loadUrl(url) }\n)\n```\n\n```java\nimport android.webkit.WebSettings;\nimport android.webkit.WebView;\nimport androidx.webkit.WebSettingsCompat;\nimport androidx.webkit.WebViewFeature;\n\nWebView webView = findViewById(R.id.webview);\nWebSettings webSettings = webView.getSettings();\n// Update WebView settings to allow JavaScript and payment request\nwebSettings.setJavaScriptEnabled(true);\nif (WebViewFeature.isFeatureSupported(WebViewFeature.PAYMENT_REQUEST)) {\n    WebSettingsCompat.setPaymentRequestEnabled(webSettings, true);\n}\n```\n\n4.  使用 Pay & Wallet 控制台为 App 请求生产访问权限。\n\n![An approved Android app integration](https://storage.googleapis.com/gweb-developer-goog-blog-assets/images/image1_dAsgxZP.original.jpg)\n\n支持 Android WebView 中的 Google Pay 允许在应用中嵌入 web 结账时向 Android 用户提供 Google Pay。",
      "translated_title": "在 Android WebView 中添加对 Google Pay 的支持",
      "images": [
        {
          "url": "https://storage.googleapis.com/gweb-developer-goog-blog-assets/images/image1_dAsgxZP.original.jpg",
          "alt": "An approved Android app integration",
          "title": "",
          "position": 1
        }
      ],
      "contentSource": "完整文章",
      "content": "Google Pay support within Android WebView is now available, starting with WebView version 137 and Play Services 25.18.30, allowing users to utilize the native Google Pay payment sheet within embedded web checkout processes."
    }
  ],
  "lastUpdated": "2025-05-29T00:13:13.900Z"
}